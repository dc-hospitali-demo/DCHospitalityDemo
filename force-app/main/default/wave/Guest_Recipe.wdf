["{}","{\"nodes\":{\"FILTER0\":{\"sources\":[\"JOIN3\"],\"action\":\"filter\",\"parameters\":{\"filterExpressions\":[{\"operands\":[\"NTO Loyalty Program\"],\"field\":\"LPrg.Name\",\"type\":\"TEXT\",\"operator\":\"EQUAL\"}]}},\"JOIN1\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"LMemTier.LoyaltyTierId\",\"LMemTier.LoyaltyMemberId\",\"LMemTier.LTier.Id\",\"LMemCurr.Id\"]},\"fields\":[]},\"sources\":[\"FILTER0\",\"LOAD_DATASET5\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"Id\"],\"rightQualifier\":\"LMemCurr\",\"rightKeys\":[\"LoyaltyMemberId\"],\"joinType\":\"LOOKUP\"}},\"LOAD_DATASET6\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"LoyaltyTierId\",\"LoyaltyMemberId\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"LoyaltyMemberTier\",\"label\":\"LoyaltyMemberTier\",\"connectionName\":\"SFDC_LOCAL\",\"type\":\"connectedDataset\"}}},\"JOIN0\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[]},\"fields\":[]},\"sources\":[\"LOAD_DATASET3\",\"LOAD_DATASET4\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"ProgramId\"],\"rightQualifier\":\"LPrg\",\"rightKeys\":[\"Id\"],\"joinType\":\"LOOKUP\"}},\"LOAD_DATASET5\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"LoyaltyMemberId\",\"TotalPointsAccrued\",\"TotalPointsRedeemed\",\"TotalPointsExpired\",\"PointsBalance\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"LoyaltyMemberCurrency\",\"label\":\"LoyaltyMemberCurrency\",\"connectionName\":\"SFDC_LOCAL\",\"type\":\"connectedDataset\"}}},\"OUTPUT0\":{\"sources\":[\"FORMULA1\"],\"action\":\"save\",\"parameters\":{\"measuresToCurrencies\":[],\"fields\":[],\"dataset\":{\"name\":\"Guest\",\"label\":\"Guest\",\"folderName\":\"SharedApp\",\"type\":\"analyticsDataset\"}}},\"LOAD_DATASET4\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"Name\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"LoyaltyProgram\",\"label\":\"LoyaltyProgram\",\"connectionName\":\"SFDC_LOCAL\",\"type\":\"connectedDataset\"}}},\"LOAD_DATASET3\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"MembershipNumber\",\"ContactId\",\"ProgramId\",\"EnrollmentDate\",\"MemberStatus\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"LoyaltyProgramMember\",\"label\":\"LoyaltyProgramMember\",\"connectionName\":\"SFDC_LOCAL\",\"type\":\"connectedDataset\"}}},\"LOAD_DATASET0\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"AccountId\",\"LastName\",\"FirstName\",\"Salutation\",\"Name\",\"MobilePhone\",\"Email\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"Contact\",\"label\":\"Contact\",\"connectionName\":\"SFDC_LOCAL\",\"type\":\"connectedDataset\"}}},\"FORMULA0\":{\"sources\":[\"JOIN2\"],\"action\":\"formula\",\"parameters\":{\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"case when (\\\"LMemCurr.LMemCurr.PointsBalance\\\" is not null and \\\"LMemCurr.LMemCurr.PointsBalance\\\" <= 7500) then (7501 - \\\"LMemCurr.LMemCurr.PointsBalance\\\") when (\\\"LMemCurr.LMemCurr.PointsBalance\\\" is not null and \\\"LMemCurr.LMemCurr.PointsBalance\\\" > 7500 and \\\"LMemCurr.LMemCurr.PointsBalance\\\" <= 15000) then (15001 - \\\"LMemCurr.LMemCurr.PointsBalance\\\")\\r\\nwhen (\\\"LMemCurr.LMemCurr.PointsBalance\\\" is not null and \\\"LMemCurr.LMemCurr.PointsBalance\\\" > 15000) then 0 end\",\"defaultValue\":\"\",\"precision\":10,\"name\":\"Points_to_Next_Tier\",\"scale\":0,\"label\":\"Points to Next Tier\",\"type\":\"NUMBER\"}]}},\"FORMULA1\":{\"sources\":[\"FORMULA0\"],\"action\":\"formula\",\"parameters\":{\"expressionType\":\"SQL\",\"fields\":[{\"formulaExpression\":\"case when (\\\"LMemCurr.LMemCurr.PointsBalance\\\" is not null and \\\"LMemCurr.LMemCurr.PointsBalance\\\" <= 7500) then 'Gold' when (\\\"LMemCurr.LMemCurr.PointsBalance\\\" is not null and \\\"LMemCurr.LMemCurr.PointsBalance\\\" > 7500 and \\\"LMemCurr.LMemCurr.PointsBalance\\\" <= 15000) then 'Platinum'\\r\\nwhen (\\\"LMemCurr.LMemCurr.PointsBalance\\\" is not null and \\\"LMemCurr.LMemCurr.PointsBalance\\\" > 15000) then 'Highest Tier' end\",\"defaultValue\":\"\",\"precision\":255,\"name\":\"Next_Tier\",\"label\":\"Next Tier\",\"type\":\"TEXT\"}]}},\"JOIN4\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[]},\"fields\":[]},\"sources\":[\"LOAD_DATASET6\",\"LOAD_DATASET7\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"LoyaltyTierId\"],\"rightQualifier\":\"LTier\",\"rightKeys\":[\"Id\"],\"joinType\":\"LOOKUP\"}},\"JOIN3\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[]},\"fields\":[]},\"sources\":[\"JOIN0\",\"JOIN4\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"Id\"],\"rightQualifier\":\"LMemTier\",\"rightKeys\":[\"LoyaltyMemberId\"],\"joinType\":\"LOOKUP\"}},\"JOIN2\":{\"schema\":{\"slice\":{\"mode\":\"DROP\",\"ignoreMissingFields\":true,\"fields\":[\"LMemCurr.Id\",\"LMemCurr.ProgramId\",\"LMemCurr.ContactId\",\"LMemCurr.LPrg.Id\",\"LMemCurr.LMemCurr.Id\",\"LMemCurr.LMemCurr.LoyaltyMemberId\"]},\"fields\":[]},\"sources\":[\"LOAD_DATASET0\",\"JOIN1\"],\"action\":\"join\",\"parameters\":{\"leftKeys\":[\"Id\"],\"rightQualifier\":\"LMemCurr\",\"rightKeys\":[\"ContactId\"],\"joinType\":\"LOOKUP\"}},\"LOAD_DATASET7\":{\"sources\":[],\"action\":\"load\",\"parameters\":{\"fields\":[\"Id\",\"Name\"],\"sampleDetails\":{\"sortBy\":[],\"type\":\"TopN\"},\"dataset\":{\"sourceObjectName\":\"LoyaltyTier\",\"label\":\"LoyaltyTier\",\"connectionName\":\"SFDC_LOCAL\",\"type\":\"connectedDataset\"}}}},\"ui\":{\"hiddenColumns\":[],\"connectors\":[{\"source\":\"TRANSFORM0\",\"target\":\"OUTPUT0\"},{\"source\":\"LOAD_DATASET3\",\"target\":\"JOIN0\"},{\"source\":\"LOAD_DATASET4\",\"target\":\"JOIN0\"},{\"source\":\"JOIN3\",\"target\":\"FILTER0\"},{\"source\":\"FILTER0\",\"target\":\"JOIN1\"},{\"source\":\"LOAD_DATASET5\",\"target\":\"JOIN1\"},{\"source\":\"LOAD_DATASET0\",\"target\":\"JOIN2\"},{\"source\":\"JOIN1\",\"target\":\"JOIN2\"},{\"source\":\"JOIN2\",\"target\":\"TRANSFORM0\"},{\"source\":\"JOIN0\",\"target\":\"JOIN3\"},{\"source\":\"JOIN4\",\"target\":\"JOIN3\"},{\"source\":\"LOAD_DATASET6\",\"target\":\"JOIN4\"},{\"source\":\"LOAD_DATASET7\",\"target\":\"JOIN4\"}],\"nodes\":{\"FILTER0\":{\"top\":252,\"left\":532,\"description\":\"\",\"label\":\"Filter NTO Loyalty Program\",\"type\":\"FILTER\"},\"JOIN1\":{\"top\":252,\"left\":672,\"description\":\"\",\"label\":\"Join Loyalty Member Currency\",\"type\":\"JOIN\"},\"LOAD_DATASET6\":{\"top\":671.9,\"left\":112,\"label\":\"LoyaltyMemberTier\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"JOIN0\":{\"top\":251.60000000000002,\"left\":252.2,\"description\":\"\",\"label\":\"LookUp Loyalty Program\",\"type\":\"JOIN\"},\"LOAD_DATASET5\":{\"top\":531.9,\"left\":112.30000000000001,\"label\":\"LoyaltyMemberCurrency\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"OUTPUT0\":{\"top\":252,\"left\":1092,\"description\":\"\",\"label\":\"Register Guest Dataset\",\"type\":\"OUTPUT\"},\"LOAD_DATASET4\":{\"top\":391.6,\"left\":112.30000000000001,\"label\":\"LoyaltyProgram\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"LOAD_DATASET3\":{\"top\":251.60000000000002,\"left\":112.19999999999999,\"label\":\"LoyaltyProgramMember\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"LOAD_DATASET0\":{\"top\":112,\"left\":112,\"label\":\"Contact\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}},\"TRANSFORM0\":{\"connectors\":[{\"source\":\"FORMULA0\",\"target\":\"FORMULA1\"}],\"top\":252,\"left\":952,\"description\":\"\",\"label\":\"Points Calculation\",\"type\":\"TRANSFORM\",\"graph\":{\"FORMULA0\":{\"label\":\"Points to Next Tier\",\"parameters\":{\"type\":\"BASE_FORMULA_UI\"}},\"FORMULA1\":{\"label\":\"Next Tier\",\"parameters\":{\"type\":\"BASE_FORMULA_UI\"}}}},\"JOIN4\":{\"top\":672,\"left\":253.3,\"description\":\"\",\"label\":\"Join Loyalty Tier\",\"type\":\"JOIN\"},\"JOIN3\":{\"top\":252,\"left\":392,\"description\":\"\",\"label\":\"Join Loyalty Member Tier\",\"type\":\"JOIN\"},\"JOIN2\":{\"top\":252,\"left\":812,\"description\":\"\",\"label\":\"Join Contact\",\"type\":\"JOIN\"},\"LOAD_DATASET7\":{\"top\":811.9,\"left\":112,\"label\":\"LoyaltyTier\",\"type\":\"LOAD_DATASET\",\"parameters\":{\"sampleSize\":2000}}}},\"version\":\"62.0\",\"runMode\":\"full\"}"]